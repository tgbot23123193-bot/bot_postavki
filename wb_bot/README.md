# WB Auto-Booking Bot

๐ค **ะัะพัะตััะธะพะฝะฐะปัะฝัะน Telegram ะฑะพั ะดะปั ะฐะฒัะพะผะฐัะธัะตัะบะพะณะพ ะฑัะพะฝะธัะพะฒะฐะฝะธั ะฟะพััะฐะฒะพะบ ะฝะฐ Wildberries**

## ๐ ะะพะทะผะพะถะฝะพััะธ

### ๐ฏ ะัะฝะพะฒะฝะพะน ััะฝะบัะธะพะฝะฐะป
- ๐ **ะะพะฝะธัะพัะธะฝะณ ัะปะพัะพะฒ** - ะพััะปะตะถะธะฒะฐะฝะธะต ะดะพัััะฟะฝัั ัะปะพัะพะฒ ะฟะพััะฐะฒะพะบ ะฒ ัะตะถะธะผะต ัะตะฐะปัะฝะพะณะพ ะฒัะตะผะตะฝะธ
- ๐ค **ะะฒัะพะฑัะพะฝะธัะพะฒะฐะฝะธะต** - ะฐะฒัะพะผะฐัะธัะตัะบะพะต ะฑัะพะฝะธัะพะฒะฐะฝะธะต ะฟัะธ ะฟะพัะฒะปะตะฝะธะธ ะฟะพะดัะพะดััะธั ัะปะพัะพะฒ
- ๐ **ะฃะผะฝัะต ัะฒะตะดะพะผะปะตะฝะธั** - ะผะณะฝะพะฒะตะฝะฝัะต ัะฒะตะดะพะผะปะตะฝะธั ะพ ะฝะฐะนะดะตะฝะฝัั ัะปะพัะฐั
- ๐ **ะะฝัะตัะฐะบัะธะฒะฝัะน ะบะฐะปะตะฝะดะฐัั** - ัะดะพะฑะฝัะน ะฒัะฑะพั ะฟะตัะธะพะดะพะฒ ะผะพะฝะธัะพัะธะฝะณะฐ
- ๐ **ะะตัะฐะปัะฝะฐั ะฐะฝะฐะปะธัะธะบะฐ** - ััะฐัะธััะธะบะฐ ะฑัะพะฝะธัะพะฒะฐะฝะธะน ะธ ัััะตะบัะธะฒะฝะพััะธ

### โ๏ธ ะะธะฑะบะธะต ะฝะฐัััะพะนะบะธ
- ๐ **ะะพัััะธัะธะตะฝัั ะฟัะธะตะผะบะธ** - ัะธะปัััะฐัะธั ะฟะพ ััะพะธะผะพััะธ (x1, x2, x3, x5)
- ๐ฆ **ะขะธะฟั ะฟะพััะฐะฒะพะบ** - ะบะพัะพะฑ ะธะปะธ ะผะพะฝะพะฟะฐะปะปะตัะฐ
- ๐ **ะขะธะฟั ะดะพััะฐะฒะบะธ** - ะฟััะผะฐั ะธะปะธ ััะฐะฝะทะธัะฝะฐั
- โฑ **ะะฝัะตัะฒะฐะปั ะฟัะพะฒะตัะบะธ** - ะพั 1 ัะตะบัะฝะดั ะดะพ 10 ะผะธะฝัั
- ๐ **ะะฝะพะถะตััะฒะตะฝะฝัะต API ะบะปััะธ** - ะดะพ 5 ะบะปััะตะน ะดะปั ัะฐัะฟัะตะดะตะปะตะฝะธั ะฝะฐะณััะทะบะธ

### ๐ก ะะตะทะพะฟะฐัะฝะพััั ะธ ะฝะฐะดะตะถะฝะพััั
- ๐ **AES-256 ัะธััะพะฒะฐะฝะธะต** API ะบะปััะตะน
- ๐ **Retry ะผะตัะฐะฝะธะทะผ** ั ัะบัะฟะพะฝะตะฝัะธะฐะปัะฝัะผ backoff
- โก **Circuit breaker** ะดะปั ะทะฐัะธัั ะพั ะบะฐัะบะฐะดะฝัั ัะฑะพะตะฒ
- ๐ **ะะพะฝะธัะพัะธะฝะณ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ** ะธ health checks
- ๐ **ะะธะบัะพัะตัะฒะธัะฝะฐั ะฐััะธัะตะบัััะฐ** ะดะปั ะณะพัะธะทะพะฝัะฐะปัะฝะพะณะพ ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธั

## ๐ ะััะธัะตะบัััะฐ

### ะขะตัะฝะธัะตัะบะธะน ััะตะบ
- **Python 3.11+** ั ัะพะฒัะตะผะตะฝะฝัะผะธ ัะธัะฐะผะธ
- **aiogram 3.x** ะดะปั Telegram ะฑะพัะฐ
- **SQLAlchemy 2.0** + **AsyncPG** ะดะปั ะฑะฐะทั ะดะฐะฝะฝัั
- **Redis** ะดะปั ะบััะธัะพะฒะฐะฝะธั ะธ ะพัะตัะตะดะตะน
- **aiohttp** ะดะปั HTTP ะบะปะธะตะฝัะฐ
- **Docker** + **Docker Compose** ะดะปั ัะฐะทะฒะตัััะฒะฐะฝะธั

### ะะพะผะฟะพะฝะตะฝัั ัะธััะตะผั
```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   Telegram Bot  โโโโโโ  Monitoring     โโโโโโ  WB API Client  โ
โ   (aiogram)     โ    โ  Service        โ    โ  (aiohttp)      โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
         โ                       โ                       โ
         โผ                       โผ                       โผ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   PostgreSQL    โ    โ     Redis       โ    โ   Encryption    โ
โ   Database      โ    โ     Cache       โ    โ   Service       โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
```

## ๐ ะัััััะน ะทะฐะฟััะบ

### 1. ะะปะพะฝะธัะพะฒะฐะฝะธะต ัะตะฟะพะทะธัะพัะธั
```bash
git clone <repository-url>
cd wb_bot
```

### 2. ะะฐัััะพะนะบะฐ ะพะบััะถะตะฝะธั
```bash
# ะกะบะพะฟะธััะนัะต ัะฐะนะป ะฝะฐัััะพะตะบ
cp env.example .env

# ะััะตะดะฐะบัะธััะนัะต .env ัะฐะนะป
nano .env
```

### 3. ะะฑัะทะฐัะตะปัะฝัะต ะฝะฐัััะพะนะบะธ ะฒ .env
```bash
# ะขะพะบะตะฝ ะฑะพัะฐ ะพั @BotFather
TG_BOT_TOKEN=your_bot_token_here

# ะะปัั ัะธััะพะฒะฐะฝะธั (32+ ัะธะผะฒะพะปะพะฒ)
SECURITY_ENCRYPTION_KEY=your_encryption_key_here

# JWT ัะตะบัะตั
SECURITY_JWT_SECRET=your_jwt_secret_here

# ะะฐัะพะปั ะฑะฐะทั ะดะฐะฝะฝัั
DB_PASSWORD=your_secure_password
```

### 4. ะะฐะฟััะบ ัะตัะตะท Docker Compose
```bash
# ะะฐะฟััะบ ะฒัะตั ัะตัะฒะธัะพะฒ
docker-compose up -d

# ะัะพะฒะตัะบะฐ ััะฐัััะฐ
docker-compose ps

# ะัะพัะผะพัั ะปะพะณะพะฒ
docker-compose logs -f wb_bot
```

### 5. ะะฝะธัะธะฐะปะธะทะฐัะธั ะฑะฐะทั ะดะฐะฝะฝัั
```bash
# ะัะฟะพะปะฝะตะฝะธะต ะผะธะณัะฐัะธะน
docker-compose run --rm migration
```

## ๐ง ะะพะฝัะธะณััะฐัะธั

### ะัะฝะพะฒะฝัะต ะฟะฐัะฐะผะตััั

| ะะฐัะฐะผะตัั | ะะฟะธัะฐะฝะธะต | ะะพ ัะผะพะปัะฐะฝะธั |
|----------|----------|--------------|
| `MONITORING_MIN_CHECK_INTERVAL` | ะะธะฝะธะผะฐะปัะฝัะน ะธะฝัะตัะฒะฐะป ะฟัะพะฒะตัะบะธ (ัะตะบ) | 30 |
| `MONITORING_MAX_CHECK_INTERVAL` | ะะฐะบัะธะผะฐะปัะฝัะน ะธะฝัะตัะฒะฐะป ะฟัะพะฒะตัะบะธ (ัะตะบ) | 1 |
| `MONITORING_CACHE_TTL` | TTL ะบััะฐ ะฒ ัะตะบัะฝะดะฐั | 5 |
| `MONITORING_MAX_CONCURRENT_REQUESTS` | ะะฐะบั. ะฟะฐัะฐะปะปะตะปัะฝัั ะทะฐะฟัะพัะพะฒ | 1000 |
| `WB_TIMEOUT` | ะขะฐะนะผะฐัั ะทะฐะฟัะพัะพะฒ ะบ WB API | 30 |
| `WB_MAX_RETRIES` | ะะฐะบัะธะผัะผ ะฟะพะฒัะพัะพะฒ ะทะฐะฟัะพัะพะฒ | 3 |

### ะะตะถะธะผั ัะฐะฑะพัั

#### ะะตะถะธะผ ัะฐะทัะฐะฑะพัะบะธ
```bash
# ะะพะบะฐะปัะฝัะน ะทะฐะฟััะบ


```

#### Webhook ัะตะถะธะผ
```bash
# ะฃััะฐะฝะพะฒะธัะต ะฟะตัะตะผะตะฝะฝัะต ะดะปั webhook
TG_WEBHOOK_URL=https://your-domain.com
TG_WEBHOOK_SECRET=your_secret

# ะะฐะฟััะบ
docker-compose up -d
```

## ๐ ะะพะฝะธัะพัะธะฝะณ

### Health Check
```bash
curl http://localhost:8080/health
```

### ะะพะณะธ
```bash
# ะัะต ะปะพะณะธ
docker-compose logs -f

# ะะพะณะธ ะบะพะฝะบัะตัะฝะพะณะพ ัะตัะฒะธัะฐ
docker-compose logs -f wb_bot
docker-compose logs -f postgres
docker-compose logs -f redis
```

### ะะตััะธะบะธ (ะพะฟัะธะพะฝะฐะปัะฝะพ)
```bash
# ะะฐะฟััะบ ั ะผะพะฝะธัะพัะธะฝะณะพะผ
docker-compose --profile monitoring up -d

# ะะพัััะฟ ะบ Grafana
open http://localhost:3000
# ะะพะณะธะฝ: admin / ะฟะฐัะพะปั: admin (ะธะปะธ ะธะท GRAFANA_PASSWORD)

# ะะพัััะฟ ะบ Prometheus
open http://localhost:9090
```

## ๐ ะะตะทะพะฟะฐัะฝะพััั

### ะะตะฝะตัะฐัะธั ะบะปััะตะน ัะธััะพะฒะฐะฝะธั
```python
import secrets
print("SECURITY_ENCRYPTION_KEY=" + secrets.token_urlsafe(32))
print("SECURITY_JWT_SECRET=" + secrets.token_urlsafe(32))
```

### ะะตะบะพะผะตะฝะดะฐัะธะธ ะฟะพ ะฑะตะทะพะฟะฐัะฝะพััะธ
- โ ะัะฟะพะปัะทัะนัะต ัะธะปัะฝัะต ะฟะฐัะพะปะธ ะดะปั ะฑะฐะทั ะดะฐะฝะฝัั
- โ ะะตะณัะปััะฝะพ ัะพัะธััะนัะต API ะบะปััะธ
- โ ะะณัะฐะฝะธัััะต ะดะพัััะฟ ะบ ัะตัะฒะตัั ัะตัะตะท firewall
- โ ะัะฟะพะปัะทัะนัะต HTTPS ะดะปั webhook'ะพะฒ
- โ ะะตะณัะปััะฝะพ ะพะฑะฝะพะฒะปัะนัะต ะทะฐะฒะธัะธะผะพััะธ

## ๐ ะัะปะฐะดะบะฐ

### ะงะฐัััะต ะฟัะพะฑะปะตะผั

#### ะะพั ะฝะต ะพัะฒะตัะฐะตั
```bash
# ะัะพะฒะตัััะต ััะฐััั ะบะพะฝัะตะนะฝะตัะฐ
docker-compose ps

# ะัะพะฒะตัััะต ะปะพะณะธ
docker-compose logs wb_bot

# ะัะพะฒะตัััะต ะฟะพะดะบะปััะตะฝะธะต ะบ ะะ
docker-compose exec postgres psql -U wb_user -d wb_bot -c "\dt"
```

#### ะัะธะฑะบะธ ะฑะฐะทั ะดะฐะฝะฝัั
```bash
# ะะตัะตัะพะทะดะฐะฝะธะต ะะ
docker-compose down -v
docker-compose up -d postgres
docker-compose run --rm migration
docker-compose up -d wb_bot
```

#### ะัะพะฑะปะตะผั ั Redis
```bash
# ะัะธััะบะฐ ะบััะฐ
docker-compose exec redis redis-cli FLUSHALL

# ะัะพะฒะตัะบะฐ ะฟะพะดะบะปััะตะฝะธั
docker-compose exec redis redis-cli ping
```

### ะะตะถะธะผ ะพัะปะฐะดะบะธ
```bash
# ะะบะปััะตะฝะธะต ะฟะพะดัะพะฑะฝัั ะปะพะณะพะฒ
DEBUG=true
LOG_LEVEL=DEBUG
DB_ECHO=true

docker-compose up -d
```

## ๐ ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั

### ะะตะบะพะผะตะฝะดัะตะผัะต ัะฐัะฐะบัะตัะธััะธะบะธ ัะตัะฒะตัะฐ
- **CPU**: 2+ ัะดัะฐ
- **RAM**: 4+ GB
- **ะะธัะบ**: 20+ GB SSD
- **ะกะตัั**: ััะฐะฑะธะปัะฝะพะต ัะพะตะดะธะฝะตะฝะธะต

### ะะฟัะธะผะธะทะฐัะธั
- ๐ ะัะฟะพะปัะทัะนัะต SSD ะดะปั ะฑะฐะทั ะดะฐะฝะฝัั
- ๐ ะะฐัััะพะนัะต connection pooling
- ๐ ะะพะฝะธัะพัััะต ะผะตััะธะบะธ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ
- โก ะะฟัะธะผะธะทะธััะนัะต ะธะฝัะตัะฒะฐะปั ะฟัะพะฒะตัะพะบ

## ๐ค ะะพะดะดะตัะถะบะฐ

### ะะพะฝัะฐะบัั
- ๐ง Email: support@example.com
- ๐ฌ Telegram: @support_username

### ะะพะปะตะทะฝัะต ัััะปะบะธ
- ๐ [ะะพะบัะผะตะฝัะฐัะธั Wildberries API](https://openapi.wb.ru/)
- ๐ค [ะะพะบัะผะตะฝัะฐัะธั aiogram](https://docs.aiogram.dev/)
- ๐ณ [Docker Compose Reference](https://docs.docker.com/compose/)

## ๐ ะะธัะตะฝะทะธั

ะญัะพั ะฟัะพะตะบั ะปะธัะตะฝะทะธััะตััั ะฟะพะด MIT License. ะกะผ. ัะฐะนะป [LICENSE](LICENSE) ะดะปั ะดะตัะฐะปะตะน.

---

**โก ะะพัะพะฒ ะบ production ะธัะฟะพะปัะทะพะฒะฐะฝะธั!**
